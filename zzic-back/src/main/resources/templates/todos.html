<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Todos</title>
	<style>
      body {
          font-family: Arial, sans-serif;
          background: linear-gradient(0.25turn, #b6fbff 0%, #83a4d4 100%);
          margin: 0;
          padding: 0;
          color: #333;
      }

      .container {
          width: 90%;
          max-width: 500px;
          margin: 20px auto;
          background: #fff;
          border-radius: 12px;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
          overflow: hidden;
          padding: 20px;
      }

      h1, h2 {
          text-align: center;
          color: #007bff;
      }

      .todo-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr); /* 기본 설정: 3열 */
          gap: 10px;
          margin-top: 20px;
      }

      @media (max-width: 768px) {
          .todo-grid {
              grid-template-columns: 1fr; /* 모바일 화면에서는 1열 */
          }
      }

      .todo-item {
          display: flex;
          flex-direction: column;
          justify-content: space-between;
          align-items: center;
          background: #f4f4f4;
          padding: 10px;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .todo-item {
          font-size: 16px;
          color: #555;
          white-space: nowrap; /* 줄바꿈 방지 */
          overflow: hidden; /* 넘치는 텍스트 숨김 */
          text-overflow: ellipsis; /* ...으로 표시 */
          text-align: left; /* 텍스트 왼쪽 정렬 (필요 시 변경 가능) */
      }

      .todo-item a {
          font-size: 16px;
          color: #007bff;
          text-decoration: none;
          white-space: nowrap; /* 줄바꿈 방지 */
          overflow: hidden; /* 넘치는 텍스트 숨김 */
          text-overflow: ellipsis; /* ...으로 표시 */
          display: inline-block; /* 요소를 블록처럼 취급하여 너비 설정 가능 */
          width: 100%; /* 너비를 설정하여 ellipsis가 적용되도록 설정 */
          text-align: center; /* 텍스트 왼쪽 정렬 (필요 시 조정 가능) */
      }

      .todo-item.done a {
          text-decoration: line-through;
          color: #494949;
      }

      .todo-buttons {
          display: flex;
          justify-content: space-between;
          width: 100%;
          margin-top: 10px;
      }

      .todo-buttons button {
          flex: 1;
          margin: 0 5px;
          padding: 10px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          transition: background-color 0.3s;
      }

      .btn-complete {
          background: #4caf50;
          color: #fff;
      }

      .btn-complete:hover {
          background: #45a049;
      }

      .btn-delete {
          background: #f44336;
          color: #fff;
      }

      .btn-delete:hover {
          background: #d32f2f;
      }

      a {
          color: #007bff;
          font-size: 16px;
          text-decoration: none;
          transition: color 0.3s, text-shadow 0.3s;
      }

      .done a:hover {
          color: #000000;
          text-shadow: 0 0 4px #000000;
      }

      a:hover {
          color: #0056b3;
          text-shadow: 0 0 4px #0056b3;
      }

      .form-container {
          display: flex;
          flex-direction: column;
          gap: 15px;
          margin-top: 20px;
      }

      .form-container input,
      .form-container textarea {
          width: 100%;
          padding: 10px;
          font-size: 16px;
          border: 1px solid #ccc;
          border-radius: 4px;
          box-sizing: border-box;
          margin: 5px 0;
      }

      .form-container button {
          width: 100%;
          padding: 10px;
          font-size: 16px;
          color: #fff;
          background: #007bff;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          transition: background-color 0.3s;
      }

      .form-container button:hover {
          background: #0056b3;
      }

      .empty-message {
          text-align: center;
          color: #999;
          font-size: 16px;
          margin: 25px;
      }
	</style>
	<script>
		function validateForm() {
			const title = document.querySelector('input[name="title"]').value.trim();
			if (title === '') {
				alert('제목을 입력주세요.');
				return false;
			}
			return true;
		}
	</script>
</head>

<body>
<div class="container">
	<h1>TODO LIST</h1>

	<div class="form-container">
		<form action="/todos" method="POST" onsubmit="return validateForm()">
			<input type="text" name="title" placeholder="Please enter the title">
			<textarea name="description" rows="3" placeholder="Please enter the content"></textarea>
			<input type="hidden" name="hit" value="true">
			<button type="submit">Create a note</button>
		</form>
	</div>

	<p class="empty-message" th:if="${#lists.isEmpty(todos)}">No items available</p>

	<h2>In progress</h2>
	<div class="todo-grid">
		<div class="todo-item" th:each="todo : ${todos}" th:if="${todo.done}">
			<a th:href="@{/todos/{id}(id=${todo.id})}" th:text="${todo.title}">TITLE</a>
			<div class="todo-buttons">
				<form action="/todos" method="post">
					<input type="hidden" name="_method" value="PATCH">
					<input type="hidden" name="hit" value="false">
					<input th:value="${todo.id}" type="hidden" name="id">
					<button class="btn-complete">Done</button>
				</form>
				<form action="/todos" method="post">
					<input type="hidden" name="_method" value="DELETE">
					<input th:value="${todo.id}" type="hidden" name="id">
					<button class="btn-delete">Delete</button>
				</form>
			</div>
		</div>
	</div>

	<h2>Completed</h2>
	<div class="todo-grid">
		<div class="todo-item done" th:each="todo : ${todos}" th:unless="${todo.done}">
			<a th:href="@{/todos/{id}(id=${todo.id})}" th:text="${todo.title}">완료된 제목</a>
			<div class="todo-buttons">
				<form action="/todos" method="post">
					<input type="hidden" name="_method" value="PATCH">
					<input type="hidden" name="hit" value="false">
					<input th:value="${todo.id}" type="hidden" name="id">
					<button class="btn-complete">Undone</button>
				</form>
				<form action="/todos" method="post">
					<input type="hidden" name="_method" value="DELETE">
					<input th:value="${todo.id}" type="hidden" name="id">
					<button class="btn-delete">Delete</button>
				</form>
			</div>
		</div>
	</div>
</div>
</body>

</html>
